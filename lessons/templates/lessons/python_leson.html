{% extends 'home/base.html' %}
{% load static%}
{% load bootstrap4 %}
{% load bootstrap_icons %}
{% load embed_video_tags %}




{% block head %} 
<link rel="stylesheet" type="text/css" media="all" href='{% static "python_interpretor/css/codemirror.css"%}'>
<link rel="stylesheet" type="text/css" media="all" href='{% static "python_interpretor/css/solarized.css"%}'>


<script src='{% static "python_interpretor/js/skulpt.js" %}' type="text/javascript"></script> 
<script src='{% static "python_interpretor/js/skulpt-stdlib.js" %}' type="text/javascript"></script> 
<script src='{% static "python_interpretor/js/codemirrorepl.js" %}' type="text/javascript"></script>
<script src='{% static "python_interpretor/js/repl.js" %}' type="text/javascript"></script>
<script src='{% static "python_interpretor/js/python.js" %}' type="text/javascript"></script>
<script src='{% static "python_interpretor/js/editor.js" %}' type="text/javascript"></script>
<script src='{% static "python_interpretor/js/plugins.js" %}' type="text/javascript"></script>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
        swal-html {
        text-align: left;
}
</style>
{% endblock %}
{% block navbar %}
{% if exercise %}
<li class="nav-item dropdown"><a aria-expanded="false" data-toggle="dropdown" class="dropdown-toggle nav-link">Exercises</a>
        <div class="dropdown-menu">
                {% for e in exercise %}
                <a class="dropdown-item" href="{{e.get_absolute_url}}"><i class="fab fa-python"></i> {{ e.title }}</a>
                {% endfor %}
        </div> 
</li>
{% endif %}
{% endblock %}
{% block content %}
{% for lesson in lessons_content %}
<div>
{% if lesson.title %}
<h1>{{lesson.title}}</h1>
{% endif %}

{% autoescape off %}{{ lesson.content }}{% endautoescape %} 

{% if lesson.code_python %}
<div>
<template id="{{ lesson.slug }}">
<swal-html>
<swal-html>
<textarea id="code" cols="85" rows="25">
{{ lesson.code_python }}
</textarea>
<button class="btn btn-primary" id="skulpt_run">{% bs_icon 'play' %} Run</button>           
</swal-html>
     

<swal-html>
<div id="mycanvas" class="d-block" style="box-sizing: border-box ;width: 100%;height: 300px ;">
<pre id="edoutput"style="color:black;">
</pre>
</div>
</swal-html>
</swal-html>
</template>
<div class="p-3">
<button id="something" type="button" class="btn btn-primary" onclick="{{ lesson.slug }}();">Try code</button>
</div>
<script>
        function {{ lesson.slug }}(){
        $.when(
        $.getScript('{% static "python_interpretor/js/codemirrorepl.js" %}'),
        $.getScript('{% static "python_interpretor/js/repl.js" %}'),
        $.getScript('{% static "python_interpretor/js/python.js" %}'),
        $.getScript('{% static "python_interpretor/js/editor.js" %}'),
        $.getScript('{% static "python_interpretor/js/plugins.js" %}'),
        ).done(
        Swal.fire({
        template: '#{{ lesson.slug }}',
        }))
}
</script>
</div>
{% endif %}
{% if lesson.video %}
<div class="container text-center">
{% video lesson.video '100% x 100%' %}        
</div>
{% endif %}
</div>
{% endfor %}

{% endblock %}
